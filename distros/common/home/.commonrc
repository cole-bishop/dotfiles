# ensure usability of delete key in shell.
which bindkey > /dev/null 2>&1 && bindkey "^[[3~" delete-char
which setopt > /dev/null 2>&1 && setopt auto_cd
[[ -r "/usr/share/z/z.sh" ]] && source /usr/share/z/z.sh
# nvm
[ -f /usr/share/nvm/init-nvm.sh ] && source /usr/share/nvm/init-nvm.sh
# npm no longer needs root to install packages.
PATH="$HOME/.node_modules/bin:$PATH"
export npm_config_prefix=~/.node_modules
# z. If installed from brew
[ -f "$(brew --prefix)/etc/profile.d/z.sh" ] && source "$(brew --prefix)/etc/profile.d/z.sh"
# ssh agent
if ! pgrep -u "$USER" ssh-agent > /dev/null; then
    ssh-agent > "$XDG_RUNTIME_DIR/ssh-agent.env"
fi
if [[ ! "$SSH_AUTH_SOCK" ]]; then
    eval "$(<"$XDG_RUNTIME_DIR/ssh-agent.env")" > /dev/null
fi
# tmux plugin manager tpm. Clone if not present.
[ ! -d "$HOME/.tmux/plugins/tpm" ] && git clone https://github.com/tmux-plugins/tpm "$HOME/.tmux/plugins/tpm"
# X settings
xset -dpms
# fzf
if [ -n "$ZSH_VERSION" ]; then
  shell_extension=zsh
else
  shell_extension=bash
fi
export FZF_DEFAULT_COMMAND='find .'
[ -f "$HOME/.fzf.$shell_extension" ] && source "$HOME/.fzf.$shell_extension"
# arch linux fzf locations.
[ -f "/usr/share/fzf/key-bindings.$shell_extension" ] && . "/usr/share/fzf/key-bindings.$shell_extension"
[ -f "/usr/share/fzf/completion.$shell_extension" ] && . "/usr/share/fzf/completion.$shell_extension"
# xbunutu fzf locations.
[ -f "/usr/share/doc/fzf/examples/key-bindings.$shell_extension" ] && . "/usr/share/doc/fzf/examples/key-bindings.$shell_extension"
[ -f "/usr/share/fzf/completion.$shell_extension" ] && . "/usr/share/fzf/completion.$shell_extension"
# nvm
unset npm_config_prefix
export NVM_DIR="$HOME/.config/nvm"
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"  # This loads nvm
[ -s "$NVM_DIR/bash_completion" ] && \. "$NVM_DIR/bash_completion"  # This loads nvm bash_completion
